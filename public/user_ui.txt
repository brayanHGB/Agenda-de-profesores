<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda de Profesores</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/nav-bar.css">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .calendar-grid {
            display: grid;
            grid-template-columns: 120px repeat(7, minmax(0, 1fr));
        }
        .slot-button:disabled {
            background-color: #f8fafc;
            color: #94a3b8;
            cursor: not-allowed;
        }
        .slot-button:not(:disabled):hover {
            background-color: #06b6d4;
            color: white;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body style="min-height: 100vh; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
    <nav class="nav" aria-label="Main">
        <div class="nav__inner">
            <a class="brand" href="index.html">
                <span class="brand__logo" aria-hidden="true"></span>
                <span class="brand__name">Tu Agenda</span><span class="brand__tm">‚Ñ¢</span>
            </a>

            <div class="menu" role="menubar" aria-label="Primary">
                <a href="#">Mi Perfil</a>
                <a href="#">Profesores</a>
                <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48" viewBox="0 0 50 50">
<path d="M 22.205078 2 A 1.0001 1.0001 0 0 0 21.21875 2.8378906 L 20.246094 8.7929688 C 19.076509 9.1331971 17.961243 9.5922728 16.910156 10.164062 L 11.996094 6.6542969 A 1.0001 1.0001 0 0 0 10.708984 6.7597656 L 6.8183594 10.646484 A 1.0001 1.0001 0 0 0 6.7070312 11.927734 L 10.164062 16.873047 C 9.583454 17.930271 9.1142098 19.051824 8.765625 20.232422 L 2.8359375 21.21875 A 1.0001 1.0001 0 0 0 2.0019531 22.205078 L 2.0019531 27.705078 A 1.0001 1.0001 0 0 0 2.8261719 28.691406 L 8.7597656 29.742188 C 9.1064607 30.920739 9.5727226 32.043065 10.154297 33.101562 L 6.6542969 37.998047 A 1.0001 1.0001 0 0 0 6.7597656 39.285156 L 10.648438 43.175781 A 1.0001 1.0001 0 0 0 11.927734 43.289062 L 16.882812 39.820312 C 17.936999 40.39548 19.054994 40.857928 20.228516 41.201172 L 21.21875 47.164062 A 1.0001 1.0001 0 0 0 22.205078 48 L 27.705078 48 A 1.0001 1.0001 0 0 0 28.691406 47.173828 L 29.751953 41.1875 C 30.920633 40.838997 32.033372 40.369697 33.082031 39.791016 L 38.070312 43.291016 A 1.0001 1.0001 0 0 0 39.351562 43.179688 L 43.240234 39.287109 A 1.0001 1.0001 0 0 0 43.34375 37.996094 L 39.787109 33.058594 C 40.355783 32.014958 40.813915 30.908875 41.154297 29.748047 L 47.171875 28.693359 A 1.0001 1.0001 0 0 0 47.998047 27.707031 L 47.998047 22.207031 A 1.0001 1.0001 0 0 0 47.160156 21.220703 L 41.152344 20.238281 C 40.80968 19.078827 40.350281 17.974723 39.78125 16.931641 L 43.289062 11.933594 A 1.0001 1.0001 0 0 0 43.177734 10.652344 L 39.287109 6.7636719 A 1.0001 1.0001 0 0 0 37.996094 6.6601562 L 33.072266 10.201172 C 32.023186 9.6248101 30.909713 9.1579916 29.738281 8.8125 L 28.691406 2.828125 A 1.0001 1.0001 0 0 0 27.705078 2 L 22.205078 2 z M 23.056641 4 L 26.865234 4 L 27.861328 9.6855469 A 1.0001 1.0001 0 0 0 28.603516 10.484375 C 30.066026 10.848832 31.439607 11.426549 32.693359 12.185547 A 1.0001 1.0001 0 0 0 33.794922 12.142578 L 38.474609 8.7792969 L 41.167969 11.472656 L 37.835938 16.220703 A 1.0001 1.0001 0 0 0 37.796875 17.310547 C 38.548366 18.561471 39.118333 19.926379 39.482422 21.380859 A 1.0001 1.0001 0 0 0 40.291016 22.125 L 45.998047 23.058594 L 45.998047 26.867188 L 40.279297 27.871094 A 1.0001 1.0001 0 0 0 39.482422 28.617188 C 39.122545 30.069817 38.552234 31.434687 37.800781 32.685547 A 1.0001 1.0001 0 0 0 37.845703 33.785156 L 41.224609 38.474609 L 38.53125 41.169922 L 33.791016 37.84375 A 1.0001 1.0001 0 0 0 32.697266 37.808594 C 31.44975 38.567585 30.074755 39.148028 28.617188 39.517578 A 1.0001 1.0001 0 0 0 27.876953 40.3125 L 26.867188 46 L 23.052734 46 L 22.111328 40.337891 A 1.0001 1.0001 0 0 0 21.365234 39.53125 C 19.90185 39.170557 18.522094 38.59371 17.259766 37.835938 A 1.0001 1.0001 0 0 0 16.171875 37.875 L 11.46875 41.169922 L 8.7734375 38.470703 L 12.097656 33.824219 A 1.0001 1.0001 0 0 0 12.138672 32.724609 C 11.372652 31.458855 10.793319 30.079213 10.427734 28.609375 A 1.0001 1.0001 0 0 0 9.6328125 27.867188 L 4.0019531 26.867188 L 4.0019531 23.052734 L 9.6289062 22.117188 A 1.0001 1.0001 0 0 0 10.435547 21.373047 C 10.804273 19.898143 11.383325 18.518729 12.146484 17.255859 A 1.0001 1.0001 0 0 0 12.111328 16.164062 L 8.8261719 11.46875 L 11.523438 8.7734375 L 16.185547 12.105469 A 1.0001 1.0001 0 0 0 17.28125 12.148438 C 18.536908 11.394293 19.919867 10.822081 21.384766 10.462891 A 1.0001 1.0001 0 0 0 22.132812 9.6523438 L 23.056641 4 z M 25 17 C 20.593567 17 17 20.593567 17 25 C 17 29.406433 20.593567 33 25 33 C 29.406433 33 33 29.406433 33 25 C 33 20.593567 29.406433 17 25 17 z M 25 19 C 28.325553 19 31 21.674447 31 25 C 31 28.325553 28.325553 31 25 31 C 21.674447 31 19 28.325553 19 25 C 19 21.674447 21.674447 19 25 19 z"></path>
</svg></a>
            </div>

            <div class="socials" aria-label="Redes sociales">
                <a class="bubble" href="#" aria-label="Instagram">
                    <svg viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.4"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.4"/><circle cx="17.5" cy="6.5" r="1" fill="currentColor"/></svg>
                </a>
                <a class="bubble" href="#" aria-label="Dribbble">
                    <svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.4"/><path d="M5 9.5c4 .5 8 .2 12-2.5M8 19c1.5-5 3.5-8 7-11M4.5 14.5c3.5-1 8.5-1.5 15 1" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
                </a>
                <a class="bubble" href="#" aria-label="Twitter">
                    <svg viewBox="0 0 24 24" fill="none"><path d="M4 4l7 8.5L6.5 20 20 8.5 13.5 20" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </a>
                <a class="bubble" href="#" aria-label="YouTube">
                    <svg viewBox="0 0 24 24" fill="none"><rect x="3" y="6.5" width="18" height="11" rx="3" stroke="currentColor" stroke-width="1.4"/><path d="M11 10l4 2-4 2v-4z" fill="currentColor"/></svg>
                </a>
            </div>

            <button class="burger" id="burger" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="drawer">
                <svg viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
            </button>
        </div>

        <div id="drawer" class="drawer" role="dialog" aria-modal="false">
            <div class="drawer__inner">
                <a href="#">Profesores</a>
                <a href="calendar.html">Calendario</a>
                <a href="#">Mi Perfil</a>
                <a href="#">Configuraci√≥n</a>
                <div class="socials">
                    <a class="bubble" href="#" aria-label="Instagram">
                        <svg viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.4"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.4"/><circle cx="17.5" cy="6.5" r="1" fill="currentColor"/></svg>
                    </a>
                    <a class="bubble" href="#" aria-label="Dribbble">
                        <svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.4"/><path d="M5 9.5c4 .5 8 .2 12-2.5M8 19c1.5-5 3.5-8 7-11M4.5 14.5c3.5-1 8.5-1.5 15 1" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
                    </a>
                    <a class="bubble" href="#" aria-label="Twitter">
                        <svg viewBox="0 0 24 24" fill="none"><path d="M4 4l7 8.5L6.5 20 20 8.5 13.5 20" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </a>
                    <a class="bubble" href="#" aria-label="YouTube">
                        <svg viewBox="0 0 24 24" fill="none"><rect x="3" y="6.5" width="18" height="11" rx="3" stroke="currentColor" stroke-width="1.4"/><path d="M11 10l4 2-4 2v-4z" fill="currentColor"/></svg>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="p-6">
    <div class="mx-auto grid max-w-6xl gap-6 md:grid-cols-[320px_1fr]">
        <!-- Sidebar -->
        <aside class="flex flex-col gap-4">
            <!-- Header -->
            <header class="rounded-2xl glass-card p-4 shadow-lg">
                <h1 class="text-xl font-semibold" style="color: #0f172a;"> Tus Clases</h1>
                <p class="text-sm" style="color: #64748b;">Conecta f√°cil con Google Calendar</p>
                <div class="mt-3 grid gap-2">
                    <button class="rounded-xl border px-3 py-2 text-sm transition-all duration-300" style="border-color: #06b6d4; color: #06b6d4; background: rgba(6, 182, 212, 0.1);" onmouseover="this.style.background='#06b6d4'; this.style.color='white'" onmouseout="this.style.background='rgba(6, 182, 212, 0.1)'; this.style.color='#06b6d4'">üîó Conectar Google Calendar</button>
                </div>
            </header>
            
            <!-- Search -->
            <div class="rounded-2xl glass-card p-4 shadow-lg">
                <label class="text-sm font-medium" style="color: #0f172a;">Buscar profesor o materia</label>
                <input id="searchInput" class="mt-1 w-full rounded-xl border px-3 py-2 transition-all duration-300" style="border-color: #e2e8f0; background: rgba(255, 255, 255, 0.9);" placeholder="p. ej. √Ålgebra, Programaci√≥n" onfocus="this.style.borderColor='#06b6d4'; this.style.boxShadow='0 0 0 3px rgba(6, 182, 212, 0.1)'" onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
            </div>
            
            <!-- Teachers List -->
            <div class="flex flex-col gap-3" id="teachersList">
                <!-- Se llena din√°micamente -->
            </div>
        </aside>
        
        <!-- Main Content -->
        <main>
            <div class="rounded-2xl glass-card p-4 shadow-lg">
                <div class="mb-3 flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-semibold" id="weekTitle" style="color: #0f172a;">üìÖ Selecciona un profesor</h3>
                        <p class="text-sm" style="color: #64748b;">Zona horaria: America/Bogota</p>
                    </div>
                    <div class="flex gap-2">
                        <button id="prevWeek" class="rounded-xl border px-3 py-2 text-sm transition-all duration-300" style="border-color: #e2e8f0; color: #0f172a; background: rgba(255, 255, 255, 0.8);" onmouseover="this.style.background='#06b6d4'; this.style.color='white'; this.style.borderColor='#06b6d4'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.color='#0f172a'; this.style.borderColor='#e2e8f0'">‚Üê Anterior</button>
                        <button id="nextWeek" class="rounded-xl border px-3 py-2 text-sm transition-all duration-300" style="border-color: #e2e8f0; color: #0f172a; background: rgba(255, 255, 255, 0.8);" onmouseover="this.style.background='#06b6d4'; this.style.color='white'; this.style.borderColor='#06b6d4'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.color='#0f172a'; this.style.borderColor='#e2e8f0'">Siguiente ‚Üí</button>
                    </div>
                </div>
                <div id="calendarGrid" class="calendar-grid">
                    <!-- Se llena din√°micamente -->
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modal -->
    <div id="bookingModal" class="fixed inset-0 z-50 hidden place-items-center bg-black/40 p-4" style="display: none;">
        <div class="w-full max-w-lg rounded-2xl bg-white p-6 shadow-xl">
            <div class="flex items-start justify-between">
                <h2 class="text-xl font-semibold">Confirmar reserva</h2>
                <button id="closeModal" class="rounded-full p-2 hover:bg-black/5">‚úï</button>
            </div>
            <p class="mt-2 text-sm text-black/70" id="modalInfo"></p>
            <div class="mt-4 grid gap-3">
                <label class="grid gap-1 text-sm">
                    <span>Tu nombre</span>
                    <input id="studentName" class="rounded-xl border px-3 py-2">
                </label>
                <label class="grid gap-1 text-sm">
                    <span>Tu correo</span>
                    <input id="studentEmail" class="rounded-xl border px-3 py-2">
                </label>
                <label class="grid gap-1 text-sm">
                    <span>Tema / Materia</span>
                    <input id="classTopic" class="rounded-xl border px-3 py-2">
                </label>
            </div>
            <div class="mt-6 flex justify-end gap-3">
                <button id="cancelBooking" class="rounded-xl border px-4 py-2">Cancelar</button>
                <button id="confirmBooking" class="rounded-xl bg-black px-4 py-2 text-white hover:opacity-90">Reservar</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div style="margin-top: 80px;"></div>
    <footer class="footer">
        <div class="footer__inner">
            <!-- COLUMNA 1 -->
            <div class="footer__brand">
                <div class="brand__logo"></div>
                <ul>
                    <li><a href="user_ui.html">Agenda</a></li>
                    <li><a href="calendar.html">Calendario</a></li>
                </ul>
                <ul>
                    <li><a href="#">Acerca de</a></li>
                    <li><a href="#">Caracter√≠sticas</a></li>
                    <li><a href="#">Precios</a></li>
                    <li><a href="#">Ayuda</a></li>
                    <li><a href="#">Pol√≠tica de Privacidad</a></li>
                </ul>
                <p class="copy">¬© 2025 Agenda de Profesores. Todos los derechos reservados.</p>
            </div>

            <!-- COLUMNA 2 -->
            <div class="footer__col">
                <h4>Producto</h4>
                <ul>
                    <li><a href="#">Resumen</a></li>
                    <li><a href="#">Caracter√≠sticas</a></li>
                    <li><a href="#">Tutoriales</a></li>
                    <li><a href="#">Precios</a></li>
                    <li><a href="#">Actualizaciones</a></li>
                </ul>
            </div>

            <!-- COLUMNA 3 -->
            <div class="footer__col">
                <h4>Compa√±√≠a</h4>
                <ul>
                    <li><a href="#">Acerca de</a></li>
                    <li><a href="#">Prensa</a></li>
                    <li><a href="#">Carreras</a></li>
                    <li><a href="#">Contacto</a></li>
                    <li><a href="#">Socios</a></li>
                </ul>
            </div>

            <!-- COLUMNA 4 -->
            <div class="footer__col">
                <h4>Soporte</h4>
                <ul>
                    <li><a href="#">Centro de Ayuda</a></li>
                    <li><a href="#">T√©rminos de servicio</a></li>
                    <li><a href="#">Legal</a></li>
                    <li><a href="#">Pol√≠tica de Privacidad</a></li>
                    <li><a href="#">Estado</a></li>
                </ul>
            </div>

            <!-- COLUMNA 5 -->
            <div class="footer__apps">
                <h4>Descargar App</h4>
                <div class="store-buttons">
                    <a href="#" class="store-btn">
                        <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="App Store">
                    </a>
                    <a href="#" class="store-btn">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Google Play">
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
       //FUNCIONALIDAD BARRA DE NAVEGACION 
        const burger = document.getElementById('burger');
        const drawer = document.getElementById('drawer');
        
        burger.addEventListener('click', () => {
            const isOpen = drawer.classList.contains('show');
            drawer.classList.toggle('show');
            burger.setAttribute('aria-expanded', !isOpen);
        });
        
        document.addEventListener('click', (e) => {
            if (!burger.contains(e.target) && !drawer.contains(e.target)) {
                drawer.classList.remove('show');
                burger.setAttribute('aria-expanded', 'false');
            }
        });
        // Datos y configuraci√≥n
        const TZ = "America/Bogota";
        const WEEKDAY_NAMES = ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado", "Domingo"];
        
        const MOCK_PROFES = [
            {
                id: "p1",
                nombre: "Ana Rodr√≠guez",
                materia: "C√°lculo / √Ålgebra",
                color: "#4f46e5",
                disponibilidad: {
                    Lunes: ["09:00", "09:30", "10:00", "14:00", "14:30", "15:00"],
                    Martes: ["08:00", "08:30", "09:00", "11:00"],
                    Mi√©rcoles: ["13:00", "13:30", "14:00"],
                    Jueves: ["07:00", "07:30", "08:00"],
                    Viernes: ["10:00", "10:30", "11:00", "16:00"],
                }
            },
            {
                id: "p2",
                nombre: "Luis Herrera",
                materia: "Programaci√≥n / Estructuras de Datos",
                color: "#16a34a",
                disponibilidad: {
                    Lunes: ["08:00", "08:30", "09:00"],
                    Martes: ["14:00", "14:30", "15:00", "15:30"],
                    Mi√©rcoles: ["09:00", "09:30", "10:00", "17:00"],
                    Jueves: ["08:00", "08:30", "09:00"],
                    Viernes: ["13:00", "13:30", "14:00"],
                }
            }
        ];
        
        // Estado global
        let selectedProfe = null;
        let currentWeek = new Date();
        let pendingSlot = null;
        let filteredProfes = [...MOCK_PROFES];
        
        // Utilidades
        function formatHour(date) {
            return new Intl.DateTimeFormat("es-CO", { hour: "2-digit", minute: "2-digit", timeZone: TZ }).format(date);
        }
        
        function startOfWeek(d) {
            const x = new Date(d);
            const day = x.getDay();
            const diff = (day === 0 ? -6 : 1) - day;
            x.setDate(x.getDate() + diff);
            x.setHours(0, 0, 0, 0);
            return x;
        }
        
        function generateSlots(baseDate) {
            const slots = [];
            const d = new Date(baseDate);
            d.setHours(7, 0, 0, 0);
            while (d.getHours() < 20) {
                slots.push(new Date(d));
                d.setMinutes(d.getMinutes() + 30);
            }
            return slots;
        }
        
        function dayName(d) {
            return WEEKDAY_NAMES[(d.getDay() + 6) % 7];
        }
        
        // Renderizado
        function renderTeachers() {
            const container = document.getElementById('teachersList');
            container.innerHTML = '';
            
            filteredProfes.forEach(profe => {
                const isActive = selectedProfe?.id === profe.id;
                const card = document.createElement('button');
                card.className = `w-full text-left rounded-2xl border p-4 transition-all duration-300 hover:shadow-lg glass-card`;
                if (isActive) {
                    card.style.borderColor = '#06b6d4';
                    card.style.boxShadow = '0 0 0 2px rgba(6, 182, 212, 0.2), 0 10px 25px rgba(0, 0, 0, 0.15)';
                } else {
                    card.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                    card.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
                }
                card.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold" style="color: #0f172a;">${profe.nombre}</h3>
                            <p class="text-sm" style="color: #64748b;">${profe.materia}</p>
                        </div>
                        <span class="inline-flex h-3 w-3 rounded-full" style="background: ${profe.color}"></span>
                    </div>
                `;
                card.addEventListener('click', () => selectProfe(profe));
                container.appendChild(card);
            });
        }
        
        function renderCalendar() {
            const container = document.getElementById('calendarGrid');
            const weekTitle = document.getElementById('weekTitle');
            
            if (!selectedProfe) {
                container.innerHTML = '<div class="col-span-8 text-center py-8 text-gray-500">Selecciona un profesor para ver su disponibilidad</div>';
                weekTitle.textContent = 'Selecciona un profesor';
                return;
            }
            
            const monday = startOfWeek(currentWeek);
            weekTitle.textContent = `Semana de ${monday.toLocaleDateString("es-CO")}`;
            
            const days = Array.from({ length: 7 }).map((_, i) => {
                const d = new Date(monday);
                d.setDate(monday.getDate() + i);
                return d;
            });
            
            container.innerHTML = '';
            
            // Header vac√≠o
            const emptyHeader = document.createElement('div');
            container.appendChild(emptyHeader);
            
            // Headers de d√≠as
            days.forEach(d => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'border-b px-2 pb-2 text-center text-sm font-medium';
                dayHeader.innerHTML = `
                    <div>${dayName(d)}</div>
                    <div class="text-black/60">${d.toLocaleDateString("es-CO", { month: "2-digit", day: "2-digit" })}</div>
                `;
                container.appendChild(dayHeader);
            });
            
            // Slots
            const slots = generateSlots(monday);
            slots.forEach((slot, i) => {
                // Hora
                const timeLabel = document.createElement('div');
                timeLabel.className = 'border-r p-1 pr-3 text-right text-xs text-black/60';
                timeLabel.textContent = i % 2 === 0 ? formatHour(slot) : '';
                container.appendChild(timeLabel);
                
                // Celdas de d√≠as
                days.forEach(d => {
                    const cell = new Date(d);
                    cell.setHours(slot.getHours(), slot.getMinutes(), 0, 0);
                    const dayLabel = dayName(cell);
                    const hhmm = cell.toLocaleTimeString("es-CO", { hour: "2-digit", minute: "2-digit", hour12: false, timeZone: TZ });
                    const libre = selectedProfe?.disponibilidad?.[dayLabel]?.includes(hhmm);
                    
                    const button = document.createElement('button');
                    button.className = `slot-button h-10 w-full border-b px-1 transition`;
                    button.disabled = !libre;
                    
                    if (libre) {
                        button.addEventListener('click', () => openBookingModal(cell));
                    }
                    
                    container.appendChild(button);
                });
            });
        }
        
        // Funciones de interacci√≥n
        function selectProfe(profe) {
            selectedProfe = profe;
            renderTeachers();
            renderCalendar();
        }
        
        function filterProfes(query) {
            const q = query.trim().toLowerCase();
            filteredProfes = q ? MOCK_PROFES.filter(p => 
                p.nombre.toLowerCase().includes(q) || 
                p.materia.toLowerCase().includes(q)
            ) : [...MOCK_PROFES];
            renderTeachers();
        }
        
        function openBookingModal(slot) {
            pendingSlot = slot;
            const end = new Date(slot);
            end.setMinutes(end.getMinutes() + 30);
            
            document.getElementById('modalInfo').innerHTML = `
                Profesor: <strong>${selectedProfe.nombre}</strong> ‚Ä¢ ${formatHour(slot)} ‚Äì ${formatHour(end)} (${TZ})
            `;
            document.getElementById('bookingModal').style.display = 'grid';
        }
        
        function closeBookingModal() {
            document.getElementById('bookingModal').style.display = 'none';
            pendingSlot = null;
            // Limpiar formulario
            document.getElementById('studentName').value = '';
            document.getElementById('studentEmail').value = '';
            document.getElementById('classTopic').value = '';
        }
        
        function confirmBooking() {
            const nombre = document.getElementById('studentName').value;
            const email = document.getElementById('studentEmail').value;
            const tema = document.getElementById('classTopic').value;
            
            if (!nombre || !email) {
                alert('Por favor completa todos los campos obligatorios');
                return;
            }
            
            alert(`Reserva creada para ${nombre} con ${selectedProfe.nombre} a las ${formatHour(pendingSlot)} (${TZ}).`);
            closeBookingModal();
        }
        
        // Event listeners
        document.getElementById('searchInput').addEventListener('input', (e) => {
            filterProfes(e.target.value);
        });
        
        document.getElementById('prevWeek').addEventListener('click', () => {
            currentWeek.setDate(currentWeek.getDate() - 7);
            renderCalendar();
        });
        
        document.getElementById('nextWeek').addEventListener('click', () => {
            currentWeek.setDate(currentWeek.getDate() + 7);
            renderCalendar();
        });
        
        document.getElementById('closeModal').addEventListener('click', closeBookingModal);
        document.getElementById('cancelBooking').addEventListener('click', closeBookingModal);
        document.getElementById('confirmBooking').addEventListener('click', confirmBooking);
        
        // Inicializaci√≥n
        renderTeachers();
        renderCalendar();
    </script>
</body>
</html>